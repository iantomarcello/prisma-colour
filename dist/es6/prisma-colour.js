export default class{constructor(t){this.raw=t,this.rgb=new Array,this.alpha=1,this.convert(this.raw)}reset(){this.convert(this.raw)}clamp(t,s){return Math.min(Math.max(t,0),s)}convert(t){switch(!0){case t.includes("#"):let g;t.length>7?(g=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),this.alpha=parseInt(g[4],16)/255):(g=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),this.alpha=1),this.rgb[0]=parseInt(g[1],16),this.rgb[1]=parseInt(g[2],16),this.rgb[2]=parseInt(g[3],16);break;case t.includes("hsl"):t.includes("a")?(p=t.substr(5).slice(0,-1).split(",").map((t=>parseFloat(t))),this.alpha=p.pop()):p=t.substr(4).slice(0,-1).split(",").map((t=>parseFloat(t)));var s,r,a,i=p[0]/360,h=p[1]/100,e=p[2]/100;if(0==h)s=r=a=e;else{function l(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(s-t)*r:r<.5?s:r<2/3?t+(s-t)*(2/3-r)*6:t}var n=e<.5?e*(1+h):e+h-e*h,o=2*e-n;s=l(o,n,i+1/3),r=l(o,n,i),a=l(o,n,i-1/3)}this.rgb=[parseInt(255*s),parseInt(255*r),parseInt(255*a)];break;case t.includes("rgb"):if(t.includes("a")){let s=t.substr(5).slice(0,-1).split(",").map((t=>parseFloat(t)));this.alpha=s.pop(),this.rgb=s}else this.rgb=t.substr(4).slice(0,-1).split(",").map((t=>parseFloat(t)));break;case Array.isArray(t):if(3===t.length)this.rgb=[...t];else if(4===t.length){var p=[...t];this.alpha=p.pop(),this.rgb=[...p]}break;default:throw Error("Param doesn't seem to be a colour.")}}luma(t){this.convert(t);var s=this.rgb[0]/255,r=this.rgb[1]/255,a=this.rgb[2]/255;return.2126*(s=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(r=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(a=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))}toHSL(t){this.convert(t);var s,r,a=this.rgb[0]/255,i=this.rgb[1]/255,h=this.rgb[2]/255,e=this.alpha,l=Math.max(a,i,h),n=Math.min(a,i,h),o=(l+n)/2,p=l-n;if(l===n)s=r=0;else{switch(r=o>.5?p/(2-l-n):p/(l+n),l){case a:s=(i-h)/p+(i<h?6:0);break;case i:s=(h-a)/p+2;break;case h:s=(a-i)/p+4}s/=6}return{h:360*s,s:100*r,l:100*o,a:e}}getRGB(){return`rgb(${[...this.rgb].join(",")})`}getRGBA(){return`rgba(${[...this.rgb,this.alpha].join(",")})`}getHex(){let t=this,s="#".concat(this.rgb.map((function(s){return((s=t.clamp(Math.round(s),255))<16?"0":"")+s.toString(16)})).join(""));if(this.alpha<1){let t=Math.round(255*this.alpha);s+=(t<16?"0":"")+t.toString(16)}return s}getHSL(){let{h:t,s:s,l:r}=this.toHSL(this.rgb);return`hsl(${t.toFixed(2)}, ${s.toFixed(2)}%, ${r.toFixed(2)}%)`}getHSLA(){return this.hslaToString(this.toHSL(this.rgb))}hslaToString({h:t,s:s,l:r,a:a},i=2){return`hsla(${t.toFixed(i)}, ${s.toFixed(i)}%, ${r.toFixed(i)}%, ${a.toFixed(i)})`}spin(t=0){let s=this.toHSL(this.rgb),r=(s.h+parseFloat(t))%360;return s.h=r<0?360+r:r,this.convert(this.hslaToString(s)),this}fade(t=this.alpha){let s=this.toHSL(this.rgb);return s.a=1-parseFloat(t)/100,s.a=this.clamp(s.a,1),this.convert(this.hslaToString(s)),this}fadeIn(t=0){let s=this.toHSL(this.rgb);return s.a+=parseFloat(t)/100,s.a=this.clamp(s.a,1),this.convert(this.hslaToString(s)),this}fadeOut(t=0){let s=this.toHSL(this.rgb);return s.a-=parseFloat(t)/100,s.a=this.clamp(s.a,1),this.convert(this.hslaToString(s)),this}lighten(t=0){let s=this.toHSL(this.rgb);return s.l+=parseFloat(t),s.l=this.clamp(s.l,100),this.convert(this.hslaToString(s)),this}darken(t=0){let s=this.toHSL(this.rgb);return s.l-=parseFloat(t),s.l=this.clamp(s.l,100),this.convert(this.hslaToString(s)),this}saturate(t=0){let s=this.toHSL(this.rgb);return s.s+=parseFloat(t),s.s=this.clamp(s.s,100),this.convert(this.hslaToString(s)),this}desaturate(t=0){let s=this.toHSL(this.rgb);return s.s-=parseFloat(t),s.s=this.clamp(s.s,100),this.convert(this.hslaToString(s)),this}}
